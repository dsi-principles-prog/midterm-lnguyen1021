---
title: "10-import"
output:
  html_document:
    code_folding: hide
    df_print: paged
author: "Linh Nguyen"
---

#Description of Data

The dataset is a mobile game dataset from kaggle that was pulled via iTunes API in August 2019. The dataset contains ~17,000 mobile games on the iTunes app store. Features of the data inlcude: URL, Icon, ID, Name, Subtitle, AVG User Rating, Price, In-app purchase, Description, Developer, Age Rating, Languages, Primary Genre, Genres, Original Release Date, Current Version. 

**BIG QUESTION**

I want to see if we can identify features/ engineer features that could predict how successful an app is (user ratings).

What features can predict mobile app success?

*the average rating columns should be filled. (no N/As) since it is our dependent variable*

***

```{r message=FALSE,  echo=F libraries}
library(tidyverse)
library(janitor)
library(assertr)
library(lubridate)
library(ggplot2)
library(tidyr)
library(lubridate)
library(purrr)
```


## Import data
```{r import}
appstore_games <- read_csv("data/appstore_games.csv", 
    col_types = cols(`Current Version Release Date` = col_datetime(format = "%d/%m/%Y"), 
        `In-app Purchases` = col_double(), 
        `Original Release Date` = col_datetime(format = "%d/%m/%Y"))) %>% 
  clean_names()
```

asserts rows >17000 and numeric columns should be a non-negative number
price, in-app purchases, user rating, user count, size
```{r asserts}

appstore_games %>% assert(nrow(.) > 17000) # assert the number of rows in the dataset
appstore_games %>% assert(within_bounds(0,Inf), average_user_rating) # assert to make sure the numeric columns are not negative: avg user rating, user rating count, price, app purchase, size
appstore_games %>% assert(within_bounds(0,Inf), user_rating_count)
appstore_games %>% assert(within_bounds(0,Inf), price)
appstore_games %>% assert(within_bounds(0,Inf), in_app_purchases)
appstore_games %>% assert(within_bounds(0,Inf), size)
#cheking to make sure now that there are no NAs in the columns that are important to our question
appstore_games %>% assert(not_na,c(name, average_user_rating, price, user_rating_count))
```

Average user rating and user rating counts have matching number of NAs.
I think these are meaningful NA's so we will keep them in the dataset

however when calculating/ building models I will remove them.
I will come back to the NAs and address them later since they are probably meaningful

let us take a look at the rows with NA prices
```{r NA_check}
appstore_games %>% 
  filter(is.na(price))
```

hmm all of the apps with NAs in the price column were release in 2019. I would assume they are free apps but i think it may be better to just remove these from the dataset since there is such a small number (24/17007).


***

## Clean Data

Some of these rows are not important to us for the time being:
1) icon_url 
2) subtitle 
3) url 
4) description

I will remove these columns and create a dataset which we will use to subset for the remaining analysis

Also i will be removing the rows where price and average_user rating is NA because we are interested in looking at average_user_rating

```{r data_subset}
cl_appstore_games <- appstore_games %>% 
  select(-c(icon_url, subtitle, url, description)) %>% #select all columns besides ones listed
  filter(!is.na(price), !is.na(average_user_rating)) %>%  #remove rows w/ NA in price and only selects rows rows that have a value in the average_user rating
  unique # only unique rows (no duplicates)


cl_appstore_games<-cl_appstore_games %>%  mutate(original_release_date= ymd(original_release_date), current_version_release_date=ymd(current_version_release_date)) %>%  select(everything())

```


```{r data_str_check}
head(cl_appstore_games)
dim(cl_appstore_games)
```


